<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libtheora: theoradec.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libtheora<span id="projectnumber">&#160;1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a href="dir_0f91760d62c578de767c41a0aaae5482.html">theora</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">theoradec.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <span class="tt">libtheoradec</span> C decoding API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;ogg/ogg.h&gt;</code><br />
<code>#include &quot;<a class="el" href="codec_8h_source.html">codec.h</a>&quot;</code><br />
</div>
<p><a href="theoradec_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:th_5Fstripe_5Fcallback" id="r_th_5Fstripe_5Fcallback"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structth__stripe__callback.html">th_stripe_callback</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The striped decode callback data to pass to <a class="el" href="#ac95cc9e109474b0fa4bb920ab2cfdf1e" title="Sets the striped decode callback function.">TH_DECCTL_SET_STRIPE_CB</a>.  <a href="structth__stripe__callback.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a01a53a08096cec23bab65f2680595c72" id="r_a01a53a08096cec23bab65f2680595c72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01a53a08096cec23bab65f2680595c72">OGG_THEORA_THEORADEC_HEADER</a>&#160;&#160;&#160;(1)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr id="typedef-members-0" class="groupHeader"><td colspan="2"><div class="groupHeader">Decoder state</div></td></tr>
<tr><td colspan="2" class="ititle"><div class="groupText"><p>The following data structures are opaque, and their contents are not publicly defined by this API.</p>
<p>Referring to their internals directly is unsupported, and may break without warning. </p>
</div></td></tr>
<tr class="memitem:a843d70bb02563885a8d54b9c1a781729" id="r_a843d70bb02563885a8d54b9c1a781729"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a></td></tr>
<tr class="memdesc:a843d70bb02563885a8d54b9c1a781729"><td class="mdescLeft">&#160;</td><td class="mdescRight">The decoder context.  <br /></td></tr>
<tr class="memitem:ab71cd2657455cc27d6c0127c66a89f28" id="r_ab71cd2657455cc27d6c0127c66a89f28"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a></td></tr>
<tr class="memdesc:ab71cd2657455cc27d6c0127c66a89f28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup information.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr id="func-members-0" class="groupHeader"><td colspan="2"><div class="groupHeader">Functions for decoding</div></td></tr>
<tr><td colspan="2" class="ititle"><div class="groupText"><p>You must link to <span class="tt">libtheoradec</span> if you use any of the functions in this section.</p>
<p>The functions are listed in the order they are used in a typical decode. The basic steps are:</p><ul>
<li>Parse the header packets by repeatedly calling <a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50" title="Decodes the header packets of a Theora stream.">th_decode_headerin()</a>.</li>
<li>Allocate a <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle with <a class="el" href="#a81888d90a9654eec3878706bd8605898" title="Allocates a decoder instance.">th_decode_alloc()</a>.</li>
<li>Call <a class="el" href="#adef55431b68aaa59d0d7b32b2f118f27" title="Releases all storage used for the decoder setup information.">th_setup_free()</a> to free any memory used for codec setup information.</li>
<li>Perform any additional decoder configuration with <a class="el" href="#a1a8051958d75b1012573b6e3c8f670e1" title="Decoder control function.">th_decode_ctl()</a>.</li>
<li>For each video data packet:<ul>
<li>Submit the packet to the decoder via <a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb" title="Submits a packet containing encoded video data to the decoder.">th_decode_packetin()</a>.</li>
<li>Retrieve the uncompressed video data via <a class="el" href="#aa9cc8af63fa8540e0fc95572f259cdcb" title="Outputs the next available frame of decoded Y&#39;CbCr data.">th_decode_ycbcr_out()</a>.</li>
</ul>
</li>
<li>Call <a class="el" href="#afb6684ad8ba507b71112bc9de148e7d0" title="Frees an allocated decoder instance.">th_decode_free()</a> to release all decoder memory. </li>
</ul>
</div></td></tr>
<tr class="memitem:a006d01d36fbe64768c571e6a12b7fc50" id="r_a006d01d36fbe64768c571e6a12b7fc50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50">th_decode_headerin</a> (<a class="el" href="structth__info.html">th_info</a> *_info, <a class="el" href="structth__comment.html">th_comment</a> *_tc, <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> **_setup, ogg_packet *_op)</td></tr>
<tr class="memdesc:a006d01d36fbe64768c571e6a12b7fc50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes the header packets of a Theora stream.  <br /></td></tr>
<tr class="memitem:a81888d90a9654eec3878706bd8605898" id="r_a81888d90a9654eec3878706bd8605898"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81888d90a9654eec3878706bd8605898">th_decode_alloc</a> (const <a class="el" href="structth__info.html">th_info</a> *_info, const <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> *_setup)</td></tr>
<tr class="memdesc:a81888d90a9654eec3878706bd8605898"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a decoder instance.  <br /></td></tr>
<tr class="memitem:adef55431b68aaa59d0d7b32b2f118f27" id="r_adef55431b68aaa59d0d7b32b2f118f27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adef55431b68aaa59d0d7b32b2f118f27">th_setup_free</a> (<a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> *_setup)</td></tr>
<tr class="memdesc:adef55431b68aaa59d0d7b32b2f118f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all storage used for the decoder setup information.  <br /></td></tr>
<tr class="memitem:a1a8051958d75b1012573b6e3c8f670e1" id="r_a1a8051958d75b1012573b6e3c8f670e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a8051958d75b1012573b6e3c8f670e1">th_decode_ctl</a> (<a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *_dec, int _req, void *_buf, size_t _buf_sz)</td></tr>
<tr class="memdesc:a1a8051958d75b1012573b6e3c8f670e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decoder control function.  <br /></td></tr>
<tr class="memitem:a31c814bf09b2232aff69c57ae20f04eb" id="r_a31c814bf09b2232aff69c57ae20f04eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb">th_decode_packetin</a> (<a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *_dec, const ogg_packet *_op, ogg_int64_t *_granpos)</td></tr>
<tr class="memdesc:a31c814bf09b2232aff69c57ae20f04eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits a packet containing encoded video data to the decoder.  <br /></td></tr>
<tr class="memitem:aa9cc8af63fa8540e0fc95572f259cdcb" id="r_aa9cc8af63fa8540e0fc95572f259cdcb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9cc8af63fa8540e0fc95572f259cdcb">th_decode_ycbcr_out</a> (<a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *_dec, <a class="el" href="codec_8h.html#a343f7cfabad179cc4fe527cf06873f45">th_ycbcr_buffer</a> _ycbcr)</td></tr>
<tr class="memdesc:aa9cc8af63fa8540e0fc95572f259cdcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the next available frame of decoded Y'CbCr data.  <br /></td></tr>
<tr class="memitem:afb6684ad8ba507b71112bc9de148e7d0" id="r_afb6684ad8ba507b71112bc9de148e7d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb6684ad8ba507b71112bc9de148e7d0">th_decode_free</a> (<a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *_dec)</td></tr>
<tr class="memdesc:afb6684ad8ba507b71112bc9de148e7d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an allocated decoder instance.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-member-group" class="groupheader"><a id="member-group" name="member-group"></a>
th_decode_ctl() codes</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="decctlcodes"></a>These are the available request codes for <a class="el" href="#a1a8051958d75b1012573b6e3c8f670e1" title="Decoder control function.">th_decode_ctl()</a>.</p>
<p>By convention, these are odd, to distinguish them from the <a class="el" href="theoraenc_8h.html#encctlcodes">encoder control codes</a>. Keep any experimental or vendor-specific values above <code>0x8000</code>. </p>
</td></tr>
<tr class="memitem:ab31f251c9319f2140d247585d30b3d07" id="r_ab31f251c9319f2140d247585d30b3d07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab31f251c9319f2140d247585d30b3d07">TH_DECCTL_GET_PPLEVEL_MAX</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:ab31f251c9319f2140d247585d30b3d07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum post-processing level.  <br /></td></tr>
<tr class="memitem:a87774c35e1a755a84e2d705b38ebef0d" id="r_a87774c35e1a755a84e2d705b38ebef0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87774c35e1a755a84e2d705b38ebef0d">TH_DECCTL_SET_PPLEVEL</a>&#160;&#160;&#160;(3)</td></tr>
<tr class="memdesc:a87774c35e1a755a84e2d705b38ebef0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the post-processing level.  <br /></td></tr>
<tr class="memitem:a1e870c654d35394f0d490045df04e0f5" id="r_a1e870c654d35394f0d490045df04e0f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e870c654d35394f0d490045df04e0f5">TH_DECCTL_SET_GRANPOS</a>&#160;&#160;&#160;(5)</td></tr>
<tr class="memdesc:a1e870c654d35394f0d490045df04e0f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the granule position.  <br /></td></tr>
<tr class="memitem:ac95cc9e109474b0fa4bb920ab2cfdf1e" id="r_ac95cc9e109474b0fa4bb920ab2cfdf1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac95cc9e109474b0fa4bb920ab2cfdf1e">TH_DECCTL_SET_STRIPE_CB</a>&#160;&#160;&#160;(7)</td></tr>
<tr class="memdesc:ac95cc9e109474b0fa4bb920ab2cfdf1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the striped decode callback function.  <br /></td></tr>
<tr class="memitem:a8d5e0b9b4c8898f93f241acbeb7e7ffb" id="r_a8d5e0b9b4c8898f93f241acbeb7e7ffb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d5e0b9b4c8898f93f241acbeb7e7ffb">TH_DECCTL_SET_TELEMETRY_MBMODE</a>&#160;&#160;&#160;(9)</td></tr>
<tr class="memdesc:a8d5e0b9b4c8898f93f241acbeb7e7ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the macroblock display mode.  <br /></td></tr>
<tr class="memitem:a829285a03d24832c583f33c6357df8aa" id="r_a829285a03d24832c583f33c6357df8aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a829285a03d24832c583f33c6357df8aa">TH_DECCTL_SET_TELEMETRY_MV</a>&#160;&#160;&#160;(11)</td></tr>
<tr class="memdesc:a829285a03d24832c583f33c6357df8aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the motion vector display mode.  <br /></td></tr>
<tr class="memitem:ae3e2f7674ad92fe67b63915d48c9df5b" id="r_ae3e2f7674ad92fe67b63915d48c9df5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3e2f7674ad92fe67b63915d48c9df5b">TH_DECCTL_SET_TELEMETRY_QI</a>&#160;&#160;&#160;(13)</td></tr>
<tr class="memdesc:ae3e2f7674ad92fe67b63915d48c9df5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the adaptive quantization display mode.  <br /></td></tr>
<tr class="memitem:a7f43fec07486f8a5f00e92aab7d44a25" id="r_a7f43fec07486f8a5f00e92aab7d44a25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f43fec07486f8a5f00e92aab7d44a25">TH_DECCTL_SET_TELEMETRY_BITS</a>&#160;&#160;&#160;(15)</td></tr>
<tr class="memdesc:a7f43fec07486f8a5f00e92aab7d44a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the bitstream breakdown visualization mode.  <br /></td></tr>
<tr class="memitem:aac9c30f65672f8266d8370fc1ca55bca" id="r_aac9c30f65672f8266d8370fc1ca55bca"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac9c30f65672f8266d8370fc1ca55bca">th_stripe_decoded_func</a>) (void *_ctx, <a class="el" href="codec_8h.html#a343f7cfabad179cc4fe527cf06873f45">th_ycbcr_buffer</a> _buf, int _yfrag0, int _yfrag_end)</td></tr>
<tr class="memdesc:aac9c30f65672f8266d8370fc1ca55bca"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback function for striped decode.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <span class="tt">libtheoradec</span> C decoding API. </p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a01a53a08096cec23bab65f2680595c72" name="a01a53a08096cec23bab65f2680595c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a53a08096cec23bab65f2680595c72">&#9670;&#160;</a></span>OGG_THEORA_THEORADEC_HEADER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OGG_THEORA_THEORADEC_HEADER&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab31f251c9319f2140d247585d30b3d07" name="ab31f251c9319f2140d247585d30b3d07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31f251c9319f2140d247585d30b3d07">&#9670;&#160;</a></span>TH_DECCTL_GET_PPLEVEL_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_GET_PPLEVEL_MAX&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the maximum post-processing level. </p>
<p>The decoder supports a post-processing filter that can improve the appearance of the decoded images. This returns the highest level setting for this post-processor, corresponding to maximum improvement and computational expense.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">_buf</td><td>int: The maximum post-processing level. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec_ctx</em> or <em class="arg">_buf</em> is <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EINVAL</td><td><em class="arg">_buf_sz</em> is not <span class="tt">sizeof(int)</span>. </td></tr>
    <tr><td class="paramname">TH_EIMPL</td><td>Not supported by this implementation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e870c654d35394f0d490045df04e0f5" name="a1e870c654d35394f0d490045df04e0f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e870c654d35394f0d490045df04e0f5">&#9670;&#160;</a></span>TH_DECCTL_SET_GRANPOS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_GRANPOS&#160;&#160;&#160;(5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the granule position. </p>
<p>Call this after a seek, before decoding the first frame, to ensure that the proper granule position is returned for all subsequent frames. If you track timestamps yourself and do not use the granule position returned by the decoder, then you need not call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_buf</td><td><span class="tt">ogg_int64_t</span>: The granule position of the next frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec_ctx</em> or <em class="arg">_buf</em> is <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EINVAL</td><td><em class="arg">_buf_sz</em> is not <span class="tt">sizeof(ogg_int64_t)</span>, or the granule position is negative. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a87774c35e1a755a84e2d705b38ebef0d" name="a87774c35e1a755a84e2d705b38ebef0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87774c35e1a755a84e2d705b38ebef0d">&#9670;&#160;</a></span>TH_DECCTL_SET_PPLEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_PPLEVEL&#160;&#160;&#160;(3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the post-processing level. </p>
<p>By default, post-processing is disabled.</p>
<p>Sets the level of post-processing to use when decoding the compressed stream. This must be a value between zero (off) and the maximum returned by TH_DECCTL_GET_PPLEVEL_MAX.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_buf</td><td>int: The new post-processing level. 0 to disable; larger values use more CPU. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec_ctx</em> or <em class="arg">_buf</em> is <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EINVAL</td><td><em class="arg">_buf_sz</em> is not <span class="tt">sizeof(int)</span>, or the post-processing level is out of bounds. The maximum post-processing level may be implementation-specific, and can be obtained via <a class="el" href="#ab31f251c9319f2140d247585d30b3d07" title="Gets the maximum post-processing level.">TH_DECCTL_GET_PPLEVEL_MAX</a>. </td></tr>
    <tr><td class="paramname">TH_EIMPL</td><td>Not supported by this implementation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac95cc9e109474b0fa4bb920ab2cfdf1e" name="ac95cc9e109474b0fa4bb920ab2cfdf1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95cc9e109474b0fa4bb920ab2cfdf1e">&#9670;&#160;</a></span>TH_DECCTL_SET_STRIPE_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_STRIPE_CB&#160;&#160;&#160;(7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the striped decode callback function. </p>
<p>If set, this function will be called as each piece of a frame is fully decoded in <a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb" title="Submits a packet containing encoded video data to the decoder.">th_decode_packetin()</a>. You can pass in a <a class="el" href="structth__stripe__callback.html" title="The striped decode callback data to pass to TH_DECCTL_SET_STRIPE_CB.">th_stripe_callback</a> with <a class="el" href="structth__stripe__callback.html#a977c725680a37e3446e459f063b1f4a5" title="The callback function pointer.">th_stripe_callback::stripe_decoded</a> set to <span class="tt">NULL</span> to disable the callbacks at any point. Enabling striped decode does not prevent you from calling <a class="el" href="#aa9cc8af63fa8540e0fc95572f259cdcb" title="Outputs the next available frame of decoded Y&#39;CbCr data.">th_decode_ycbcr_out()</a> after the frame is fully decoded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_buf</td><td><a class="el" href="structth__stripe__callback.html" title="The striped decode callback data to pass to TH_DECCTL_SET_STRIPE_CB.">th_stripe_callback</a>: The callback parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec_ctx</em> or <em class="arg">_buf</em> is <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EINVAL</td><td><em class="arg">_buf_sz</em> is not <span class="tt">sizeof(th_stripe_callback)</span>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f43fec07486f8a5f00e92aab7d44a25" name="a7f43fec07486f8a5f00e92aab7d44a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f43fec07486f8a5f00e92aab7d44a25">&#9670;&#160;</a></span>TH_DECCTL_SET_TELEMETRY_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_TELEMETRY_BITS&#160;&#160;&#160;(15)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the bitstream breakdown visualization mode. </p>
<p>Set to 0 to disable displaying bitstream breakdown. </p>

</div>
</div>
<a id="a8d5e0b9b4c8898f93f241acbeb7e7ffb" name="a8d5e0b9b4c8898f93f241acbeb7e7ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d5e0b9b4c8898f93f241acbeb7e7ffb">&#9670;&#160;</a></span>TH_DECCTL_SET_TELEMETRY_MBMODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_TELEMETRY_MBMODE&#160;&#160;&#160;(9)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the macroblock display mode. </p>
<p>Set to 0 to disable displaying macroblocks. </p>

</div>
</div>
<a id="a829285a03d24832c583f33c6357df8aa" name="a829285a03d24832c583f33c6357df8aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a829285a03d24832c583f33c6357df8aa">&#9670;&#160;</a></span>TH_DECCTL_SET_TELEMETRY_MV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_TELEMETRY_MV&#160;&#160;&#160;(11)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the motion vector display mode. </p>
<p>Set to 0 to disable displaying motion vectors. </p>

</div>
</div>
<a id="ae3e2f7674ad92fe67b63915d48c9df5b" name="ae3e2f7674ad92fe67b63915d48c9df5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e2f7674ad92fe67b63915d48c9df5b">&#9670;&#160;</a></span>TH_DECCTL_SET_TELEMETRY_QI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TH_DECCTL_SET_TELEMETRY_QI&#160;&#160;&#160;(13)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the adaptive quantization display mode. </p>
<p>Set to 0 to disable displaying adaptive quantization. </p>

</div>
</div>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="a843d70bb02563885a8d54b9c1a781729" name="a843d70bb02563885a8d54b9c1a781729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843d70bb02563885a8d54b9c1a781729">&#9670;&#160;</a></span>th_dec_ctx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> <a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The decoder context. </p>

</div>
</div>
<a id="ab71cd2657455cc27d6c0127c66a89f28" name="ab71cd2657455cc27d6c0127c66a89f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71cd2657455cc27d6c0127c66a89f28">&#9670;&#160;</a></span>th_setup_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup information. </p>
<p>This contains auxiliary information (Huffman tables and quantization parameters) decoded from the setup header by <a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50" title="Decodes the header packets of a Theora stream.">th_decode_headerin()</a> to be passed to <a class="el" href="#a81888d90a9654eec3878706bd8605898" title="Allocates a decoder instance.">th_decode_alloc()</a>. It can be re-used to initialize any number of decoders, and can be freed via <a class="el" href="#adef55431b68aaa59d0d7b32b2f118f27" title="Releases all storage used for the decoder setup information.">th_setup_free()</a> at any time. </p>

</div>
</div>
<a id="aac9c30f65672f8266d8370fc1ca55bca" name="aac9c30f65672f8266d8370fc1ca55bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac9c30f65672f8266d8370fc1ca55bca">&#9670;&#160;</a></span>th_stripe_decoded_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* th_stripe_decoded_func) (void *_ctx, <a class="el" href="codec_8h.html#a343f7cfabad179cc4fe527cf06873f45">th_ycbcr_buffer</a> _buf, int _yfrag0, int _yfrag_end)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A callback function for striped decode. </p>
<p>This is a function pointer to an application-provided function that will be called each time a section of the image is fully decoded in <a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb" title="Submits a packet containing encoded video data to the decoder.">th_decode_packetin()</a>. This allows the application to process the section immediately, while it is still in cache. Note that the frame is decoded bottom to top, so <em class="arg">_yfrag0</em> will steadily decrease with each call until it reaches 0, at which point the full frame is decoded. The number of fragment rows made available in each call depends on the pixel format and the number of post-processing filters enabled, and may not even be constant for the entire frame. If a non-<span class="tt">NULL</span> <em class="arg">_granpos</em> pointer is passed to <a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb" title="Submits a packet containing encoded video data to the decoder.">th_decode_packetin()</a>, the granule position for the frame will be stored in it before the first callback is made. If an entire frame is dropped (a 0-byte packet), then no callbacks will be made at all for that frame. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_ctx</td><td>An application-provided context pointer. </td></tr>
    <tr><td class="paramname">_buf</td><td>The image buffer for the decoded frame. </td></tr>
    <tr><td class="paramname">_yfrag0</td><td>The Y coordinate of the first row of 8x8 fragments decoded. Multiply this by 8 to obtain the pixel row number in the luma plane. If the chroma planes are subsampled in the Y direction, this will always be divisible by two. </td></tr>
    <tr><td class="paramname">_yfrag_end</td><td>The Y coordinate of the first row of 8x8 fragments past the newly decoded section. If the chroma planes are subsampled in the Y direction, this will always be divisible by two. I.e., this section contains fragment rows <span class="tt"><em class="arg">_yfrag0</em> ...<em class="arg">_yfrag_end</em> -1</span>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a81888d90a9654eec3878706bd8605898" name="a81888d90a9654eec3878706bd8605898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81888d90a9654eec3878706bd8605898">&#9670;&#160;</a></span>th_decode_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> * th_decode_alloc </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structth__info.html">th_info</a> *</td>          <td class="paramname"><span class="paramname"><em>_info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> *</td>          <td class="paramname"><span class="paramname"><em>_setup</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocates a decoder instance. </p>
<p><b>Security Warning:</b> The Theora format supports very large frame sizes, potentially even larger than the address space of a 32-bit machine, and creating a decoder context allocates the space for several frames of data. If the allocation fails here, your program will crash, possibly at some future point because the OS kernel returned a valid memory range and will only fail when it tries to map the pages in it the first time they are used. Even if it succeeds, you may experience a denial of service if the frame size is large enough to cause excessive paging. If you are integrating libtheora in a larger application where such things are undesirable, it is highly recommended that you check the frame size in <em class="arg">_info</em> before calling this function and refuse to decode streams where it is larger than some reasonable maximum. libtheora will not check this for you, because there may be machines that can handle such streams and applications that wish to. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_info</td><td>A <a class="el" href="structth__info.html" title="Theora bitstream information.">th_info</a> struct filled via <a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50" title="Decodes the header packets of a Theora stream.">th_decode_headerin()</a>. </td></tr>
    <tr><td class="paramname">_setup</td><td>A <a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28" title="Setup information.">th_setup_info</a> handle returned via <a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50" title="Decodes the header packets of a Theora stream.">th_decode_headerin()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The initialized <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>If the decoding parameters were invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a8051958d75b1012573b6e3c8f670e1" name="a1a8051958d75b1012573b6e3c8f670e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a8051958d75b1012573b6e3c8f670e1">&#9670;&#160;</a></span>th_decode_ctl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int th_decode_ctl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *</td>          <td class="paramname"><span class="paramname"><em>_dec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>_req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>_buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_buf_sz</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decoder control function. </p>
<p>This is used to provide advanced control of the decoding process. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dec</td><td>A <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle. </td></tr>
    <tr><td class="paramname">_req</td><td>The control code to process. See <a class="el" href="#decctlcodes">the list of available control codes</a> for details. </td></tr>
    <tr><td class="paramname">_buf</td><td>The parameters for this control code. </td></tr>
    <tr><td class="paramname">_buf_sz</td><td>The size of the parameter buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Possible return values depend on the control code used. See <a class="el" href="#decctlcodes">the list of control codes</a> for specific values. Generally 0 indicates success. </dd></dl>

</div>
</div>
<a id="afb6684ad8ba507b71112bc9de148e7d0" name="afb6684ad8ba507b71112bc9de148e7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6684ad8ba507b71112bc9de148e7d0">&#9670;&#160;</a></span>th_decode_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void th_decode_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *</td>          <td class="paramname"><span class="paramname"><em>_dec</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees an allocated decoder instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dec</td><td>A <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a006d01d36fbe64768c571e6a12b7fc50" name="a006d01d36fbe64768c571e6a12b7fc50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a006d01d36fbe64768c571e6a12b7fc50">&#9670;&#160;</a></span>th_decode_headerin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int th_decode_headerin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structth__info.html">th_info</a> *</td>          <td class="paramname"><span class="paramname"><em>_info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structth__comment.html">th_comment</a> *</td>          <td class="paramname"><span class="paramname"><em>_tc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> **</td>          <td class="paramname"><span class="paramname"><em>_setup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ogg_packet *</td>          <td class="paramname"><span class="paramname"><em>_op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decodes the header packets of a Theora stream. </p>
<p>This should be called on the initial packets of the stream, in succession, until it returns <span class="tt">0</span>, indicating that all headers have been processed, or an error is encountered. At least three header packets are required, and additional optional header packets may follow. This can be used on the first packet of any logical stream to determine if that stream is a Theora stream. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_info</td><td>A <a class="el" href="structth__info.html" title="Theora bitstream information.">th_info</a> structure to fill in. This must have been previously initialized with <a class="el" href="codec_8h.html#a430d9c605816a6ca0bdce3a0b965b926" title="Initializes a th_info structure.">th_info_init()</a>. The application may immediately begin using the contents of this structure after the first header is decoded, though it must continue to be passed in on all subsequent calls. </td></tr>
    <tr><td class="paramname">_tc</td><td>A <a class="el" href="structth__comment.html" title="The comment information.">th_comment</a> structure to fill in. The application may immediately begin using the contents of this structure after the second header is decoded, though it must continue to be passed in on all subsequent calls. </td></tr>
    <tr><td class="paramname">_setup</td><td>Returns a pointer to additional, private setup information needed by the decoder. The contents of this pointer must be initialized to <span class="tt">NULL</span> on the first call, and the returned value must continue to be passed in on all subsequent calls. </td></tr>
    <tr><td class="paramname">_op</td><td>An <span class="tt">ogg_packet</span> structure which contains one of the initial packets of an Ogg logical stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A positive value indicates that a Theora header was successfully processed. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The first video data packet was encountered after all required header packets were parsed. The packet just passed in on this call should be saved and fed to <a class="el" href="#a31c814bf09b2232aff69c57ae20f04eb" title="Submits a packet containing encoded video data to the decoder.">th_decode_packetin()</a> to begin decoding video data. </td></tr>
    <tr><td class="paramname">TH_EFAULT</td><td>One of <em class="arg">_info</em>, <em class="arg">_tc</em>, or <em class="arg">_setup</em> was <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EBADHEADER</td><td><em class="arg">_op</em> was <span class="tt">NULL</span>, the packet was not the next header packet in the expected sequence, or the format of the header data was invalid. </td></tr>
    <tr><td class="paramname">TH_EVERSION</td><td>The packet data was a Theora info header, but for a bitstream version not decodable with this version of <span class="tt">libtheoradec</span>. </td></tr>
    <tr><td class="paramname">TH_ENOTFORMAT</td><td>The packet was not a Theora header. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31c814bf09b2232aff69c57ae20f04eb" name="a31c814bf09b2232aff69c57ae20f04eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c814bf09b2232aff69c57ae20f04eb">&#9670;&#160;</a></span>th_decode_packetin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int th_decode_packetin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *</td>          <td class="paramname"><span class="paramname"><em>_dec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ogg_packet *</td>          <td class="paramname"><span class="paramname"><em>_op</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ogg_int64_t *</td>          <td class="paramname"><span class="paramname"><em>_granpos</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Submits a packet containing encoded video data to the decoder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dec</td><td>A <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle. </td></tr>
    <tr><td class="paramname">_op</td><td>An <span class="tt">ogg_packet</span> containing encoded video data. </td></tr>
    <tr><td class="paramname">_granpos</td><td>Returns the granule position of the decoded packet. If non-<span class="tt">NULL</span>, the granule position for this specific packet is stored in this location. This is computed incrementally from previously decoded packets. After a seek, the correct granule position must be set via <a class="el" href="#a1e870c654d35394f0d490045df04e0f5" title="Sets the granule position.">TH_DECCTL_SET_GRANPOS</a> for this to work properly. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success. A new decoded frame can be retrieved by calling <a class="el" href="#aa9cc8af63fa8540e0fc95572f259cdcb" title="Outputs the next available frame of decoded Y&#39;CbCr data.">th_decode_ycbcr_out()</a>. </td></tr>
    <tr><td class="paramname">TH_DUPFRAME</td><td>The packet represented a dropped frame (either a 0-byte frame or an INTER frame with no coded blocks). The player can skip the call to <a class="el" href="#aa9cc8af63fa8540e0fc95572f259cdcb" title="Outputs the next available frame of decoded Y&#39;CbCr data.">th_decode_ycbcr_out()</a>, as the contents of the decoded frame buffer have not changed. </td></tr>
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec</em> or <em class="arg">_op</em> was <span class="tt">NULL</span>. </td></tr>
    <tr><td class="paramname">TH_EBADPACKET</td><td><em class="arg">_op</em> does not contain encoded video data. </td></tr>
    <tr><td class="paramname">TH_EIMPL</td><td>The video data uses bitstream features which this library does not support. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa9cc8af63fa8540e0fc95572f259cdcb" name="aa9cc8af63fa8540e0fc95572f259cdcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9cc8af63fa8540e0fc95572f259cdcb">&#9670;&#160;</a></span>th_decode_ycbcr_out()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int th_decode_ycbcr_out </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a843d70bb02563885a8d54b9c1a781729">th_dec_ctx</a> *</td>          <td class="paramname"><span class="paramname"><em>_dec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="codec_8h.html#a343f7cfabad179cc4fe527cf06873f45">th_ycbcr_buffer</a></td>          <td class="paramname"><span class="paramname"><em>_ycbcr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Outputs the next available frame of decoded Y'CbCr data. </p>
<p>If a striped decode callback has been set with <a class="el" href="#ac95cc9e109474b0fa4bb920ab2cfdf1e" title="Sets the striped decode callback function.">TH_DECCTL_SET_STRIPE_CB</a>, then the application does not need to call this function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dec</td><td>A <a class="el" href="#a843d70bb02563885a8d54b9c1a781729" title="The decoder context.">th_dec_ctx</a> handle. </td></tr>
    <tr><td class="paramname">_ycbcr</td><td>A video buffer structure to fill in. <span class="tt">libtheoradec</span> will fill in all the members of this structure, including the pointers to the uncompressed video data. The memory for this video data is owned by <span class="tt">libtheoradec</span>. It may be freed or overwritten without notification when subsequent frames are decoded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">TH_EFAULT</td><td><em class="arg">_dec</em> or <em class="arg">_ycbcr</em> was <span class="tt">NULL</span>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adef55431b68aaa59d0d7b32b2f118f27" name="adef55431b68aaa59d0d7b32b2f118f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef55431b68aaa59d0d7b32b2f118f27">&#9670;&#160;</a></span>th_setup_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void th_setup_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ab71cd2657455cc27d6c0127c66a89f28">th_setup_info</a> *</td>          <td class="paramname"><span class="paramname"><em>_setup</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases all storage used for the decoder setup information. </p>
<p>This should be called after you no longer want to create any decoders for a stream whose headers you have parsed with <a class="el" href="#a006d01d36fbe64768c571e6a12b7fc50" title="Decodes the header packets of a Theora stream.">th_decode_headerin()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_setup</td><td>The setup information to free. This can safely be <span class="tt">NULL</span>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for libtheora by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
